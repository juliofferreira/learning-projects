{"ast":null,"code":"import _regeneratorRuntime from \"/home/user/cursos/java-script/react/testes/1976-react-testes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/user/cursos/java-script/react/testes/1976-react-testes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nvar API_URL = 'http://localhost:3001';\nvar TRANSACOES_URI = \"\".concat(API_URL, \"/transacoes\");\nvar CONTA_URI = \"\".concat(API_URL, \"/conta\");\n\nvar conecta = function conecta(uri) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return fetch(uri, options).then( /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(resposta) {\n      var dados;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!resposta.ok) {\n                _context.next = 5;\n                break;\n              }\n\n              _context.next = 3;\n              return resposta.json();\n\n            case 3:\n              dados = _context.sent;\n              return _context.abrupt(\"return\", dados);\n\n            case 5:\n              console.log(resposta);\n              throw new Error(resposta);\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }());\n};\n\nvar listaTransacoes = function listaTransacoes() {\n  return conecta(TRANSACOES_URI);\n};\n\nvar buscaSaldo = function buscaSaldo() {\n  return conecta(CONTA_URI).then(function (dados) {\n    return dados.saldo;\n  });\n};\n\nvar atualizaSaldo = function atualizaSaldo(saldo) {\n  return conecta(CONTA_URI, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json;charset=utf-8'\n    },\n    body: JSON.stringify({\n      saldo: saldo\n    })\n  });\n};\n\nvar atualizaTransacoes = function atualizaTransacoes(dados) {\n  return conecta(TRANSACOES_URI, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json;charset=utf-8'\n    },\n    body: JSON.stringify(dados)\n  });\n};\n\nexport default {\n  listaTransacoes: listaTransacoes,\n  buscaSaldo: buscaSaldo,\n  atualizaSaldo: atualizaSaldo,\n  atualizaTransacoes: atualizaTransacoes\n};","map":{"version":3,"sources":["/home/user/cursos/java-script/react/testes/1976-react-testes/src/api/index.js"],"names":["API_URL","TRANSACOES_URI","CONTA_URI","conecta","uri","options","fetch","then","resposta","ok","json","dados","console","log","Error","listaTransacoes","buscaSaldo","saldo","atualizaSaldo","method","headers","body","JSON","stringify","atualizaTransacoes"],"mappings":";;AAAA,IAAMA,OAAO,GAAG,uBAAhB;AACA,IAAMC,cAAc,aAAMD,OAAN,gBAApB;AACA,IAAME,SAAS,aAAMF,OAAN,WAAf;;AAEA,IAAMG,OAAO,GAAG,SAAVA,OAAU,CAACC,GAAD,EAAuB;AAAA,MAAjBC,OAAiB,uEAAP,EAAO;AACrC,SAAOC,KAAK,CAACF,GAAD,EAAMC,OAAN,CAAL,CAAoBE,IAApB;AAAA,wEAAyB,iBAAOC,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAC1BA,QAAQ,CAACC,EADiB;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAERD,QAAQ,CAACE,IAAT,EAFQ;;AAAA;AAEtBC,cAAAA,KAFsB;AAAA,+CAGrBA,KAHqB;;AAAA;AAM9BC,cAAAA,OAAO,CAACC,GAAR,CAAYL,QAAZ;AAN8B,oBAOxB,IAAIM,KAAJ,CAAUN,QAAV,CAPwB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAzB;;AAAA;AAAA;AAAA;AAAA,MAAP;AASD,CAVD;;AAYA,IAAMO,eAAe,GAAG,SAAlBA,eAAkB;AAAA,SAAMZ,OAAO,CAACF,cAAD,CAAb;AAAA,CAAxB;;AAEA,IAAMe,UAAU,GAAG,SAAbA,UAAa;AAAA,SAAMb,OAAO,CAACD,SAAD,CAAP,CAAmBK,IAAnB,CAAwB,UAAAI,KAAK;AAAA,WAAIA,KAAK,CAACM,KAAV;AAAA,GAA7B,CAAN;AAAA,CAAnB;;AAEA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACD,KAAD;AAAA,SAAWd,OAAO,CAACD,SAAD,EAAY;AAClDiB,IAAAA,MAAM,EAAE,MAD0C;AAElDC,IAAAA,OAAO,EAAE;AAAC,sBAAgB;AAAjB,KAFyC;AAGlDC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAACN,MAAAA,KAAK,EAALA;AAAD,KAAf;AAH4C,GAAZ,CAAlB;AAAA,CAAtB;;AAMA,IAAMO,kBAAkB,GAAG,SAArBA,kBAAqB,CAACb,KAAD;AAAA,SAAWR,OAAO,CAACF,cAAD,EAAiB;AAC5DkB,IAAAA,MAAM,EAAE,MADoD;AAE5DC,IAAAA,OAAO,EAAE;AAAC,sBAAgB;AAAjB,KAFmD;AAG5DC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeZ,KAAf;AAHsD,GAAjB,CAAlB;AAAA,CAA3B;;AAMA,eAAe;AACbI,EAAAA,eAAe,EAAfA,eADa;AAEbC,EAAAA,UAAU,EAAVA,UAFa;AAGbE,EAAAA,aAAa,EAAbA,aAHa;AAIbM,EAAAA,kBAAkB,EAAlBA;AAJa,CAAf","sourcesContent":["const API_URL = 'http://localhost:3001';\nconst TRANSACOES_URI = `${API_URL}/transacoes`;\nconst CONTA_URI = `${API_URL}/conta`;\n\nconst conecta = (uri, options = {}) => {\n  return fetch(uri, options).then(async (resposta) => {\n    if (resposta.ok) {\n      const dados = await resposta.json();\n      return dados;\n    }\n\n    console.log(resposta)\n    throw new Error(resposta);\n  })\n}\n\nconst listaTransacoes = () => conecta(TRANSACOES_URI);\n\nconst buscaSaldo = () => conecta(CONTA_URI).then(dados => dados.saldo);\n\nconst atualizaSaldo = (saldo) => conecta(CONTA_URI, {\n  method: 'POST',\n  headers: {'Content-Type': 'application/json;charset=utf-8'},\n  body: JSON.stringify({saldo}),\n});\n\nconst atualizaTransacoes = (dados) => conecta(TRANSACOES_URI, {\n  method: 'POST',\n  headers: {'Content-Type': 'application/json;charset=utf-8'},\n  body: JSON.stringify(dados),\n});\n\nexport default {\n  listaTransacoes,\n  buscaSaldo,\n  atualizaSaldo,\n  atualizaTransacoes,\n};\n"]},"metadata":{},"sourceType":"module"}